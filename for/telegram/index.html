<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Башкы бет</title>
  <link rel="stylesheet" href="general-ftg.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <script src="general.ftg.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

  <!-- home -->
  <section class="page home" id="home">
    <header class="home-header header">
      Башкы
    </header>

    <div class="greeting-container">
      <h3>
        Салам, <br /> <span id="user-name">Конок!</span>
      </h3>
      <h2>
        Биздин мини тиркемебизге кош келиңиз!
      </h2>
    </div>

  </section>

  <!-- stores -->
  <section class="page stores" id="store">
    <header class="stores-header header">
      Дүкөндөр
    </header>
  </section>

  <!-- infoner -->
  <section class="page infoner" id="infoner">
    <header class="infoner-header header">
      Infoner
    </header>

    <div class="video-wrapper">
      <div class="video-container">
        <iframe src="https://www.youtube.com/embed/yZDcZ__d18E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
        </iframe>
      </div>
      <div class="video-info">
        <p class="video-title">Blockchain иштөөсү</p>
        <sub class="video-subtitle">Описания</sub>
        <p class="video-description">Blockchain`дин кантип иштөөсү тууралуу кыскача видео</p>
      </div>
    </div>
  </section>

  <!-- partners -->
  <section class="page partners" id="partners">
    <header class="partners-header header">
      Өнөктөштөр
    </header>

  </section>

  <footer class="footer" id="footer">
    <nav>
      <ul>
        <li class="page-btn" onclick="showPage('home')"><i class="fa fa-home"></i>Башкы</li>
        <li class="page-btn" onclick="showPage('store')"><i class="fa fa-shopping-bag"></i>Store</li>
        <li class="page-btn" onclick="showPage('infoner')"><i class="fa fa-book"></i>Infoner</li>
        <li class="page-btn" onclick="showPage('partners')"><i class="fa fa-handshake"></i>Өнөктөш</li>
      </ul>
    </nav>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      if (window.Telegram && Telegram.WebApp && Telegram.WebApp.initDataUnsafe) {
        const user = Telegram.WebApp.initDataUnsafe.user;

        if (user && user.first_name) {
          const usernameLink = user.username ? `<a href="https://t.me/${user.username}">${user.first_name}</a>` : user.first_name;
          document.querySelector(".greeting-container h3").innerHTML = `Салам, <br /> ${usernameLink}!`;
        } else {
          document.querySelector(".greeting-container h3").innerHTML = "Салам, <br /> Конок!";
        }
      } else {
        console.error("Telegram WebApp API жеткиликтүү эмес!");
      }
    });

    document.addEventListener("DOMContentLoaded", function() {
      const categoryButtons = document.querySelectorAll(".category-btn");
      const stores = document.querySelectorAll(".store");

      categoryButtons.forEach((button) => {
        button.addEventListener("click", function() {
          // Бардык кнопкалардан актив классын алып салуу
          categoryButtons.forEach((btn) => btn.classList.remove("active"));
          this.classList.add("active");

          const category = this.getAttribute("data-category");

          stores.forEach((store) => {
            if (category === "all" || store.getAttribute("data-category").includes(category)) {
              store.style.display = "block";
            } else {
              store.style.display = "none";
            }
          });
        });
      });
    });
  </script>
</body>

</html>
